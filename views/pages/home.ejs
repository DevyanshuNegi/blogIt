<%- include("../partials/head.ejs") %>

  <%- include("../partials/sidebar.ejs") %>

    <!-- content after sidebar -->
    <div class="row">

      <div class="home-center-content col-md-9 col-sm-12 pt-4">
        <!-- Center content must be here -->

        <div class="position-relative">

          <h3 class="home-our-stories d-inline">&emsp;<i class="bi bi-heart-fill"></i>&emsp; Our Stories</h3>
          <!-- <button class="btn btn-info position-absolute" style="right: 20px;">SingUp/Login</button> -->
          <% if (user==null) { %>
            <a href="/login" class="btn btn-info position-absolute" style="right: 20px;">Login/SignUp</a>

            <% } else { %>
              <a href="/logout" class="btn btn-info position-absolute" style="right: 20px;">Logout</a>
              <% } %>
        </div>
        <hr>

        <p> user <%= user %></p>

        <div class="row row-cols-1 row-cols-lg-2 g-4">

          <% randomBlogs.forEach(blog=> { %>
            <div class="col blog-container" id=<%=blog._id %>>
              <div class="card">
                <img src=<%=blog.thumbnail %> class="center-thumbnail card-img-top" alt=<%= blog.title %>>
                  <div class="card-body">
                    <h5 class="card-title">
                      <%= blog.title %>
                    </h5>
                    <p class="card-text center-content-text">
                      <%= blog.content %>
                    </p>
                    <div class="blog-details d-flex gap-3">

                      <p><i class="bi bi-activity"></i>
                        <%= blog.views %> views
                      </p>
                      <p><i class="bi bi-clock"></i>
                        <%= blog.createdAt %>
                      </p>
                    </div>
                  </div>
              </div>
            </div>
            <% }) %>
        </div>


      </div>


      <!-- right side extra content -->
      <div class="col-3 d-none d-md-block">
        <div style="top: 2rem;">
          <!-- class="position-sticky"  to the div for scroll lock -->
          <h3>Search</h3>
          <h4 class="fst-italic my-3">Popular posts</h4>
          <div class="card popular-image-card-div text-light" style="width: 100%;">
            <div class="popular-image blog-container" id=<%=popularBlog[0]._id %>>
              <img src=<%=popularBlog[0].thumbnail %> class="card-img-top popular-thumbnail" alt=<%=
                popularBlog[0].title %>>

                <div class="card-body pl-3">
                  <h4>
                    <%= popularBlog[0].title %>
                  </h4>
                  <!-- <p class="card-text "><%= popularBlog[0].content %></p> -->
                </div>
            </div>
          </div>


          <div>
            <h4 class="fst-italic mt-3">Recent posts</h4>
            <ul class="list-unstyled">
              <li>
                <a class="d-flex flex-column flex-lg-row gap-3 align-items-start align-items-lg-center py-3 link-body-emphasis text-decoration-none border-top"
                  href="#">
                  <svg class="bd-placeholder-img" width="100%" height="96" xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                    <rect width="100%" height="100%" fill="#777"></rect>
                  </svg>
                  <div class="col-lg-8">
                    <h6 class="mb-0">Example blog post title</h6>
                    <small class="text-body-secondary">January 15, 2024</small>
                  </div>
                </a>
              </li>
              <li>
                <a class="d-flex flex-column flex-lg-row gap-3 align-items-start align-items-lg-center py-3 link-body-emphasis text-decoration-none border-top"
                  href="#">
                  <svg class="bd-placeholder-img" width="100%" height="96" xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                    <rect width="100%" height="100%" fill="#777"></rect>
                  </svg>
                  <div class="col-lg-8">
                    <h6 class="mb-0">This is another blog post title</h6>
                    <small class="text-body-secondary">January 14, 2024</small>
                  </div>
                </a>
              </li>
              <li>
                <a class="d-flex flex-column flex-lg-row gap-3 align-items-start align-items-lg-center py-3 link-body-emphasis text-decoration-none border-top"
                  href="#">
                  <svg class="bd-placeholder-img" width="100%" height="96" xmlns="http://www.w3.org/2000/svg"
                    aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                    <rect width="100%" height="100%" fill="#777"></rect>
                  </svg>
                  <div class="col-lg-8">
                    <h6 class="mb-0">Longer blog post title: This one has multiple lines!</h6>
                    <small class="text-body-secondary">January 13, 2024</small>
                  </div>
                </a>
              </li>
            </ul>
          </div>

          <div class="">
            <h4 class="fst-italic">Categories</h4>
            <ol class="categories-list d-flex flex-wrap list-unstyled mb-0">
              <li><a href="#">March 2021</a></li>
              <li><a href="#">February 2021</a></li>
              <li><a href="#">January 2021</a></li>
              <li><a href="#">December 2020</a></li>
              <li><a href="#">November 2020</a></li>
              <li><a href="#">October 2020</a></li>
              <li><a href="#">September 2020</a></li>
              <li><a href="#">August 2020</a></li>
              <li><a href="#">July 2020</a></li>
              <li><a href="#">June 2020</a></li>
              <li><a href="#">May 2020</a></li>
              <li><a href="#">April 2020</a></li>
            </ol>
          </div>

        </div>

      </div>

      <%- include("../partials/foot.ejs") %>