<%- include("../partials/head.ejs") %>

  <%- include("../partials/sidebar.ejs", {user:user}) %>

    <!-- content after sidebar -->
    <div class="main-content-parent">

      <div class="row">

        <div class="col-md-9 col-sm-12 pt-4">
          <!-- Center content must be here -->

          <div class="position-relative">
            <h3 class="home-our-stories d-inline">
              &emsp;
              <i class="bi bi-list bi-list-button" id="menu-button"></i>
              <i class="bi bi-heart-fill"></i>
              Our Stories
            </h3>
<!-- this is try comment -->
            <!-- <h3 class="home-our-stories d-inline">&emsp;<i class="bi bi-list" id="menu-button"></i> <i
                class="bi bi-heart-fill"></i>&emsp; Our Stories</h3> -->

            <!-- <button class="btn btn-info position-absolute" style="right: 20px;">SingUp/Login</button> -->



            <!-- <div class="form-check form-switch justify-content-center mb-3 position-absolute"
              style="right: 0; top: 8px;">
                  <div class="d-flex justify-content-center mt-4">
                    <div class="form-group">
                      <label for="theme-select" class="mr-2">Choose a theme:</label>
                      <select id="theme-select" class="form-control">
                        <option value="default">Default</option>
                        <option value="dark">Dark</option>
                        <option value="light">Light</option>
                      </select>
                    </div>
                  </div>
            </div> -->
            <div class="center-search search-and-results mx-3" id="search-and-results">
              <div class="input-group mb-3 rounded-4 my-4">

                <!-- onkeyup="searchBlogs()"  -->
                <input type="text" id="searchTerm" class="form-control" name="searchTerm" placeholder="Search"
                  aria-label="Search" aria-describedby="search-addon">
                <button id="clearButton" class="btn bg-white">
                  <i class="bi bi-x-lg"></i>
                </button>
                <button class="btn btn-outline-primary" type="button" id="search-addon"><i
                    class="bi bi-search"></i></button>
              </div>
              <div id="searchResults">
                <!-- search results will be displayed here -->

              </div>
            </div>
          </div>
          <hr>

          <div class="row row-cols-1 row-cols-lg-2 g-4">

            <% randomBlogs.forEach(blog=> { %>
              <div class="col">
                <div class="card  blog-container" id=<%=blog._id %>>
                  <img src=<%=blog.thumbnail %> class="center-thumbnail card-img-top" alt=<%= blog.title %>>
                    <div class="card-body">
                      <h5 class="card-title">
                        <%= blog.title %>
                      </h5>
                      <p class="card-text center-content-text">
                        <%= blog.content %>
                      </p>
                      <div class="blog-details d-flex gap-3">

                        <p><i class="bi bi-activity"></i>
                          <%= blog.views %> views
                        </p>
                        <p class="d-flex"><i class="bi bi-clock"></i>
                          <span class="format-date">
                            <%= blog.createdAt %>
                          </span>
                        </p>
                      </div>
                    </div>
                </div>
              </div>
              <% }) %>
          </div>


        </div>


        <!-- right side extra content -->
        <div class="col-3 d-none d-md-block">
          <div style="top: 2rem;">
            <!-- class="position-sticky"  to the div for scroll lock -->

            <!-- <h1>Blog Search</h1> -->
            <!-- <div class="search-and-results" id="search-and-results">
              <div class="input-group mb-3 rounded-4 my-4">

                <input type="text" id="searchTerm" class="form-control" name="searchTerm" placeholder="Search"
                  aria-label="Search" aria-describedby="search-addon">
                <button id="clearButton" class="bg-white">
                  <i class="bi bi-x-lg" id="clearButton"></i>
                </button>
                <button class="btn btn-outline-primary" type="button" id="search-addon"><i
                    class="bi bi-search"></i></button>
              </div>
              <div id="searchResults">

              </div>
            </div> -->
            <div class="search-and-results mx-3" id="search-and-results">
              <div class="input-group mb-3 rounded-4 my-4">

                <!-- onkeyup="searchBlogs()"  -->
                <input type="text" id="sideSearchTerm" class="form-control" name="searchTerm" placeholder="Search"
                  aria-label="Search" aria-describedby="search-addon">
                <button id="clearButton" class="btn bg-white">
                  <i class="bi bi-x-lg"></i>
                </button>
                <button class="btn btn-outline-primary" type="button" id="search-addon"><i
                    class="bi bi-search"></i></button>
              </div>
              <div id="searchResults">
                <!-- search results will be displayed here -->

              </div>
            </div>

            <hr>

            <h4 class="fst-italic my-3">Popular posts</h4>
            <div class="card popular-image-card-div text-light" style="width: 100%;">
              <div class="popular-image blog-container" id=<%=popularBlog[0]._id %>>
                <img src=<%=popularBlog[0].thumbnail %> class="card-img-top popular-thumbnail" alt=<%=
                  popularBlog[0].title %>>

                  <div class="card-body pl-3">
                    <h4>
                      <%= popularBlog[0].title %>
                    </h4>
                    <!-- <p class="card-text "><%= popularBlog[0].content %></p> -->
                  </div>
              </div>
            </div>


            <div>
              <h4 class="fst-italic mt-3">Recent posts</h4>
              <% if (historyBlogs[0]!=undefined) { %>
                <% console.log(historyBlogs) %>
                  <ul class="list-unstyled">
                    <% historyBlogs.forEach(element=> { %>

                      <li id=<%=element._id %> >
                        <a class="d-flex flex-column flex-lg-row gap-3 align-items-start align-items-lg-center py-3 link-body-emphasis text-decoration-none border-top"
                          href="#">
                          <!-- <svg class="bd-placeholder-img" width="100%" height="96" xmlns="http://www.w3.org/2000/svg"
                      aria-hidden="true" preserveAspectRatio="xMidYMid slice" focusable="false">
                      <rect width="100%" height="100%" fill="#777"></rect>
                    </svg> -->
                          <img class="bd-placeholder-img" width="100" height="96" style="object-fit: cover;"
                            src=<%=element.thumbnail %>
                          alt=<%= element.title %> >
                            <div class="col-lg-8">
                              <h6 class="mb-0">
                                <%= element.title %>
                              </h6>
                              <small class="text-body-secondary format-date">
                                <%= element.createdAt %>
                              </small>
                            </div>
                        </a>
                      </li>
                      <% }) %>
                  </ul>

                  <% } else { %>
                    <!-- <hr> -->
                    <!-- <h5> No recent posts</h5> -->
                    <h6> SignIn to see recent posts</h6>
                    <hr>
                    <% } %>


            </div>
            <!-- // enum: [
        // "Lifestyle", "Technology", "Business",
        // "Entertainment", "Science ", "Parenting",
        // "Social Issues", "Personal Development", "Finance",
        // ], -->
            <div class="">
              <h4 class="fst-italic">Categories</h4>
              <ol class="categories-list d-flex flex-wrap list-unstyled mb-0">
                <% for( let index=0; index < categories.length; index++ ) { %>
                  <li><a href=<%=cathref[index] %>><%= categories[index] %></a></li>
                  <% } %>
                    <li><a href="/?category=category">Travel</a></li>
              </ol>
            </div>

          </div>

        </div>
      </div>


      <%- include("../partials/foot.ejs") %>